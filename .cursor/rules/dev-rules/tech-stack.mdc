---
description: 技術スタック定義
alwaysApply: true
---

# 技術スタック

| レイヤー | 技術 | 用途 |
| -------- | ---- | ---- |
| **フロントエンド** | **Nuxt 4** | Vueフレームワークによる高速UX |
| **状態管理** | **Pinia** | ページ間での状態共有とデータ管理 |
| **BaaS (DB)** | **Supabase** | PostgreSQLによるジョブ管理・リアルタイムステータス更新 |
| **バックエンド** | **Nitro (Nuxt 4)** | Gemini APIとの通信、署名付きURLの発行、ロジック管理 |
| **画像生成API** | **Gemini (Imagen 3)** | Image-to-Imageによる高精度生成 |
| **ストレージ** | **Vercel Blob** | 生成画像の一時保存・エッジ配信 |
| **インフラ** | **Vercel** | フロントエンドおよびサーバーレス関数のホスティング |

## 認証方式

* **非認証モデル:** 認証なしで匿名セッションID（`anon_session_id`）を使用
* **セキュリティ:** SupabaseのRow Level Security (RLS) により、`anon_session_id`ベースでアクセス制御
* **セッション管理:** クライアント側でUUIDを生成し、ローカルストレージ等で保持

## 重要な設計原則

* **セキュリティ:** Gemini API Key等の秘匿情報はすべてNitro（サーバーサイド）で処理
* **リアルタイム性:** Supabase Realtime機能で生成完了を即座に通知（ポーリング不要）
* **一時ストレージ:** Vercel Blobに保存した画像は24時間後に自動削除
* **レート制限:** IPアドレス単位でのリクエスト制限を実装（APIコスト保護）
* **広告制御:** 生成完了後も広告視聴完了までダウンロードボタンを無効化
